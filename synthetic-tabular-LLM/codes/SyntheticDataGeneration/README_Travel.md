# ğŸš€ Travel æ•°æ®é›† EPIC ç”ŸæˆæŒ‡å—

## ğŸ“‹ æ•°æ®é›†ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **æ•°æ®é›†åç§°** | Travel Insurance Prediction |
| **ä»»åŠ¡** | é¢„æµ‹å®¢æˆ·æ˜¯å¦è´­ä¹°æ—…è¡Œä¿é™© |
| **æ ·æœ¬æ•°** | è®­ç»ƒé›† 1589ï¼Œæµ‹è¯•é›† 399 |
| **ç‰¹å¾æ•°** | 9 ä¸ªç‰¹å¾ |
| **ç›®æ ‡å˜é‡** | `TravelInsurance` (0=æœªè´­ä¹°, 1=è´­ä¹°) |
| **ç±»åˆ«åˆ†å¸ƒ** | 0: 1021 (64%), 1: 568 (36%) |

## ğŸ¯ å®Œæ•´è¿è¡Œæ­¥éª¤

### **æ­¥éª¤ 1ï¼šæ•°æ®é¢„å¤„ç†**

å°†åŸå§‹çš„ `travel_train.csv` å’Œ `travel_test.csv` è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ï¼š

```bash
cd synthetic-tabular-LLM/codes/SyntheticDataGeneration
python preprocess_travel_data.py
```

**è¾“å‡ºæ–‡ä»¶**ï¼ˆä¿å­˜åœ¨ `data/realdata/Travel/`ï¼‰ï¼š
- âœ… `X_train.csv` - è®­ç»ƒé›†ç‰¹å¾
- âœ… `y_train.csv` - è®­ç»ƒé›†æ ‡ç­¾
- âœ… `X_test.csv` - æµ‹è¯•é›†ç‰¹å¾
- âœ… `y_test.csv` - æµ‹è¯•é›†æ ‡ç­¾

---

### **æ­¥éª¤ 2ï¼šç”Ÿæˆåˆæˆæ•°æ®**

è¿è¡Œ EPIC æ–¹æ³•ç”Ÿæˆ 1000 æ¡åˆæˆæ•°æ®ï¼š

```bash
python generate_samples_Travel.py
```

**é¢„è®¡è¿è¡Œæ—¶é—´**ï¼šçº¦ 15-30 åˆ†é’Ÿï¼ˆå–å†³äº API é€Ÿåº¦ï¼‰

**è¾“å‡ºæ–‡ä»¶**ï¼ˆä¿å­˜åœ¨ `data/syndata/Travel_DeepSeek_EPIC/`ï¼‰ï¼š
- âœ… `Travel_samples.csv` - ç”Ÿæˆçš„åˆæˆæ•°æ®
- âœ… `Travel_samples.txt` - Prompt æ¨¡æ¿è®°å½•

---

### **æ­¥éª¤ 3ï¼šè¯„ä¼°åˆæˆæ•°æ®è´¨é‡**

ä½¿ç”¨ä¸‹æ¸¸åˆ†ç±»ä»»åŠ¡è¯„ä¼°ç”Ÿæˆæ•°æ®çš„è´¨é‡ï¼š

```bash
cd ../DownstreamTasks
python Classification.py
```

**è¯„ä¼°æŒ‡æ ‡**ï¼š
- F1-Score
- Balanced Accuracy
- AUC
- Precision/Recall

---

## âš™ï¸ å…³é”®å‚æ•°é…ç½®

åœ¨ `generate_samples_Travel.py` ä¸­å¯ä»¥è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š

```python
params = {
    "N_SAMPLES_PER_CLASS": 15,  # æ¯ç±»ç»™ LLM çœ‹å¤šå°‘ä¸ªæ ·æœ¬ï¼ˆFew-shotï¼‰
    "N_BATCH": 20,              # æ¯æ¬¡ API è°ƒç”¨ç”Ÿæˆå¤šå°‘è¡Œ
    "N_TARGET_SAMPLES": 1000,   # ç›®æ ‡ç”Ÿæˆæ€»æ•°
    "USE_RANDOM_WORD": True,    # æ˜¯å¦ä½¿ç”¨éšæœºå•è¯æ˜ å°„ï¼ˆEPIC æ ¸å¿ƒï¼‰
}
```

---

## ğŸ” ä¸ Sick æ•°æ®é›†çš„å·®å¼‚

| é¡¹ç›® | Travel | Sick |
|------|--------|------|
| **ç›®æ ‡å˜é‡å** | `Target` | `Class` |
| **ç›®æ ‡å˜é‡ç±»å‹** | æ•°å€¼ (0/1) | å­—ç¬¦ä¸² (negative/sick) |
| **åˆ†ç±»ç‰¹å¾æ•°** | 4 ä¸ª | 21 ä¸ª |
| **æ•°å€¼ç‰¹å¾æ•°** | 5 ä¸ª | 6 ä¸ª |
| **ç±»åˆ«ä¸å¹³è¡¡ç¨‹åº¦** | ä¸­ç­‰ (1.8:1) | ä¸¥é‡ (çº¦ 15:1) |

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ‰¾ä¸åˆ°æ•°æ®æ–‡ä»¶
**é”™è¯¯**ï¼š`FileNotFoundError: X_train.csv`

**è§£å†³**ï¼šå…ˆè¿è¡Œ `preprocess_travel_data.py` è¿›è¡Œæ•°æ®é¢„å¤„ç†

### 2. API è°ƒç”¨å¤±è´¥
**é”™è¯¯**ï¼š`API Error (Check Quota/Network)`

**è§£å†³**ï¼š
- æ£€æŸ¥ DeepSeek API Key æ˜¯å¦æœ‰æ•ˆ
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥ API é…é¢æ˜¯å¦ç”¨å®Œ

### 3. ç”Ÿæˆæ•°æ®æ ¼å¼é”™è¯¯
**é”™è¯¯**ï¼š`Parsing error: ...`

**è§£å†³**ï¼š
- è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼ŒLLM æœ‰æ—¶ä¼šè¾“å‡ºæ ¼å¼ä¸è§„èŒƒçš„æ•°æ®
- è„šæœ¬ä¼šè‡ªåŠ¨è·³è¿‡é”™è¯¯æ•°æ®ï¼Œç»§ç»­ç”Ÿæˆ
- å¦‚æœé”™è¯¯ç‡è¿‡é«˜ï¼ˆ>50%ï¼‰ï¼Œå¯ä»¥è°ƒæ•´ Prompt æ¨¡æ¿

---

## ğŸ“Š é¢„æœŸç»“æœ

æ ¹æ®è®ºæ–‡ï¼ŒEPIC æ–¹æ³•åœ¨ Travel æ•°æ®é›†ä¸Šçš„é¢„æœŸæ€§èƒ½ï¼š

| æ–¹æ³• | F1-Score | Balanced Accuracy |
|------|----------|-------------------|
| **EPIC (LLM)** | ~0.75-0.80 | ~0.72-0.78 |
| CTGAN | ~0.68-0.72 | ~0.65-0.70 |
| TVAE | ~0.65-0.70 | ~0.63-0.68 |
| SMOTE | ~0.70-0.75 | ~0.68-0.73 |

---

## ğŸ”’ å®‰å…¨æç¤º

**é‡è¦**ï¼šä»£ç ä¸­åŒ…å«æ˜æ–‡ API Keyï¼Œå»ºè®®ï¼š

1. ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š
```python
my_deepseek_key = os.getenv("DEEPSEEK_API_KEY")
```

2. åˆ›å»º `.env` æ–‡ä»¶ï¼š
```
DEEPSEEK_API_KEY=sk-your-key-here
```

3. å°† `.env` æ·»åŠ åˆ° `.gitignore`

---

## ğŸ“š å‚è€ƒèµ„æ–™

- è®ºæ–‡ï¼š[EPIC: Effective Prompting for Imbalanced-Class Data Synthesis](https://arxiv.org/abs/2404.12404)
- é¡¹ç›®ä¸»é¡µï¼šhttps://seharanul17.github.io/project-synthetic-tabular-llm/

